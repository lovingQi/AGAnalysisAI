# 股票分析策略优化项目

## 背景和动机
用户需要优化现有的股票分析策略，特别是希望扩展分析范围至过去一个月内的股票数据，并使买入策略更全面、更优化。现有的程序主要基于技术指标进行股票分析和买入信号识别，但可能存在优化空间，可以通过增加更多指标、优化现有算法和纳入更长期数据来提高分析精度。

## 关键挑战和分析
1. **当前系统分析**：
   - 现有系统从akshare获取股票数据，但没有明确指定日期范围，导致分析时间范围不固定
   - 使用了MA、RSI、MACD、KDJ等基本技术指标，但可以增加更多先进指标
   - 买入信号主要基于6种技术指标：MA金叉、RSI超卖、MACD金叉、KDJ金叉、放量上涨、突破前高
   - 使用了简单的评分机制（各信号固定加分）来综合评估各信号
   - 缺乏对趋势的深入分析和对市场整体环境的考量

2. **需要改进的领域**：
   - 时间范围：明确指定获取并分析过去一个月的数据，更好地捕捉中期趋势和市场周期
   - 指标选择：增加更多技术和基本面指标，提高分析维度
   - 买入策略：优化现有策略，考虑更多市场因素和股票特性
   - 评分系统：改进评分权重和阈值，使其更全面准确，可以根据市场环境动态调整
   - 趋势分析：增加对中期趋势的判断，而不仅仅是短期信号

## 高层任务拆分
1. **扩展时间范围分析**
   - 修改数据获取逻辑，明确指定获取过去一个月的数据
   - 调整现有指标计算，确保充分利用一个月数据分析中期趋势
   - 任务成功标准：能够明确获取并分析过去30天的数据

2. **增强技术指标分析**
   - 增加更多技术指标：
     - 布林带(Bollinger Bands)：识别市场波动性和潜在突破点
     - 成交量变化指标(OBV)：确认价格趋势是否有成交量支撑
     - 趋向指数(DMI/ADX)：判断趋势强度
     - 随机指标(Stochastic)：识别超买超卖状态
     - VWAP（成交量加权平均价格）：识别日内支撑阻力位
   - 优化现有指标的计算方法和参数
   - 任务成功标准：成功实现至少3个新技术指标，并改进现有指标计算

3. **改进买入信号识别**
   - 细化现有买入信号判断标准：
     - 增加对MA多周期（5、10、20、60日）交叉的综合分析
     - 改进RSI信号，增加背离分析
     - 优化MACD金叉判断，区分强弱金叉，加入柱状图分析
     - 完善KDJ指标判断，考虑三线位置关系
   - 添加新的买入信号类型：
     - 支撑位反弹信号
     - 布林带突破信号
     - 趋势确认信号（DMI/ADX）
     - 成交量确认信号
     - 均线系统形态信号（多均线多头排列）
   - 实现对一个月数据的趋势分析：
     - 判断是否处于上升趋势中
     - 分析回调买入机会
     - 识别突破前期高点的机会
   - 任务成功标准：成功实现至少5个新买入信号，并优化现有信号判断

4. **优化评分系统**
   - 调整各信号的权重分配：
     - 根据当前市场环境动态调整权重
     - 对多重信号叠加给予额外加分
     - 减少重复计算同类信号
   - 增加信号之间的关联性分析：
     - 技术指标互相印证，提高确认度
     - 成交量与价格信号结合分析
   - 考虑引入行业和市场整体情况：
     - 根据行业板块强弱调整评分
     - 考虑大盘走势对个股影响
   - 任务成功标准：改进评分算法，使评分更能反映股票实际买入价值

5. **测试和验证**
   - 使用历史数据验证新策略的有效性
   - 比较新旧策略的推荐结果差异
   - 增加关键买入信号的可视化展示
   - 任务成功标准：新策略能识别出更有价值的买入机会，减少假信号干扰

## 项目状态看板
- [x] 1. 扩展时间范围分析 (进行中)
- [ ] 2. 增强技术指标分析
- [ ] 3. 改进买入信号识别
- [ ] 4. 优化评分系统
- [ ] 5. 测试和验证

## 当前状态/进度跟踪
开始执行第一个任务：扩展时间范围分析。将修改数据获取逻辑，明确指定获取过去一个月的数据，并确保分析利用这段时间的数据。

## 执行者反馈或请求帮助
正在修改 stock_analysis_all.py 文件中的数据获取部分，以支持明确的时间范围设置。

## 经验教训
- 程序输出应包含调试信息
- 编辑文件前先读取文件内容
- 遇到npm漏洞时先运行npm audit 